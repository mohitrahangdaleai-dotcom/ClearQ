{% extends "base.html" %}

{% block title %}Profile - AI Job Matcher{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0"><i class="fas fa-user"></i> Profile Information</h4>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="name" name="name" 
                                   value="{{ user.name if user else '' }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label">Phone</label>
                            <input type="tel" class="form-control" id="phone" name="phone" 
                                   value="{{ user.phone if user and user.phone else '' }}">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="skills" class="form-label">Skills (comma separated)</label>
                        <textarea class="form-control" id="skills" name="skills" rows="3">
                            {%- if user and user.skills -%}
                                {{- user.skills|tojson|fromjson|join(', ') -}}
                            {%- endif -%}
                        </textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="experience" class="form-label">Experience</label>
                        <textarea class="form-control" id="experience" name="experience" rows="4">
                            {{ user.experience if user and user.experience else '' }}
                        </textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="education" class="form-label">Education</label>
                        <textarea class="form-control" id="education" name="education" rows="3">
                            {{ user.education if user and user.education else '' }}
                        </textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="preferred_location" class="form-label">Preferred Location</label>
                            <input type="text" class="form-control" id="preferred_location" name="preferred_location"
                                   value="{{ user.preferred_location if user and user.preferred_location else '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="expected_salary" class="form-label">Expected Salary</label>
                            <input type="text" class="form-control" id="expected_salary" name="expected_salary"
                                   value="{{ user.expected_salary if user and user.expected_salary else '' }}">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Update Profile
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-upload"></i> Resume Upload</h5>
            </div>
            <div class="card-body text-center">
                <p>Upload your resume to automatically fill your profile and get better job matches.</p>
                <a href="{{ url_for('upload_resume') }}" class="btn btn-success w-100">
                    <i class="fas fa-file-upload"></i> Upload Resume
                </a>
                
                {% if user and user.resume_text %}
                <div class="mt-3">
                    <small class="text-success">
                        <i class="fas fa-check-circle"></i> Resume uploaded
                    </small>
                </div>
                {% endif %}
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-chart-bar"></i> Profile Stats</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Skills
                        <span class="badge bg-primary rounded-pill">
                            {% if user and user.skills %}
                                {{ (user.skills|tojson|fromjson)|length }}
                            {% else %}
                                0
                            {% endif %}
                        </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Resume Uploaded
                        <span class="badge bg-{% if user and user.resume_text %}success{% else %}secondary{% endif %} rounded-pill">
                            {% if user and user.resume_text %}Yes{% else %}No{% endif %}
                        </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Profile Complete
                        <span class="badge bg-{% if user and user.skills %}success{% else %}warning{% endif %} rounded-pill">
                            {% if user and user.skills %}Yes{% else %}No{% endif %}
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}